# 하이브리드 서비스(SaaS) 전환 구현 로드맵

이 문서는 현재의 로컬 설치형 프로그램을 **"클라우드 인증 + 로컬 실행"** 모델로 전환하기 위한 단계별 실행 계획입니다. 이 방식을 통해 서버 비용을 최소화하면서 유료 사용자 관리와 자동 업데이트를 구현할 수 있습니다.

---

## 🏗️ 1단계: 중앙 관리 서버 구축 (인증/결제/버전 관리)
사용자의 접속 권한을 확인하고 프로그램을 배포하는 **가벼운 웹 서버**가 필요합니다.

### 1.1 기술 스택
- **언어:** Python (FastAPI/Django) 또는 Node.js (가장 빠르고 저렴하게 구축 가능)
- **DB:** PostgreSQL (사용자 계정, 결제 내역, 소프트웨어 버전 정보 저장)
- **호스팅:** AWS Lightsail ($3.5/월) 또는 Vercel/Supabase (초기 무료)

### 1.2 핵심 기능 개발
1.  **회원 시스템:** 회원가입, 로그인, 비밀번호 찾기 (OAuth 소셜 로그인 추천)
2.  **라이선스 관리:**
    - 유저별 `라이선스 키` 발급 또는 `구독 상태` (Active/Expired) 관리
    - 중복 로그인 방지 (선택 사항: HWID 체크 등)
3.  **버전 관리 API:**
    - 프로그램에게 최신 버전 정보(`v2.0.1`)와 다운로드 경로(`URL`)를 알려주는 API
4.  **결제 연동 (PG사):** 토스페이먼츠, 스트라이프 등 연동하여 구독 결제 처리

---

## 🛠️ 2단계: 로컬 클라이언트(현재 프로그램) 수정
현재 프로그램이 실행될 때 "누구인지" 확인하고 "최신인지" 검사하는 관문을 만듭니다.

### 2.1 로그인 런처(Launcher) 제작
프로그램 실행 시 가장 먼저 뜨는 작은 창입니다. (메인 프로그램 실행 전 단계)
- **로그인 UI:** 아이디/비번 입력 → 중앙 서버로 전송 → 유효한 구독자인지 확인
- **토큰 저장:** 로그인 성공 시 `access_token`을 로컬에 암호화하여 저장 (자동 로그인용)

### 2.2 자동 업데이트 (Auto-Updater) 탑재
런처가 실행될 때마다 중앙 서버에 버전을 물어봅니다.
- **로직:**
  1. 서버 버전(`2.0`) > 로컬 버전(`1.0`) 확인
  2. 업데이트가 필요하면 변경된 코드 파일(Zip) 다운로드
  3. 기존 폴더에 덮어쓰기 (Overwrite)
  4. 업데이트 완료 후 메인 프로그램 실행
- **방식:** `Git Pull` 방식을 활용하거나, 미리 빌드된 `Patch.zip`을 내려받아 해제하는 방식 사용

### 2.3 메인 프로그램 보호 (선택 사항)
- 로그인 과정을 건너뛰고 메인 프로그램(`main.py` 등)을 바로 실행하지 못하도록, 메인 로직 내 주입된 **라이선스 검증 코드**가 주기적으로 서버와 통신(Heartbeat)하게 합니다.

---

## 📦 3단계: 배포 및 설치 패키징
사용자가 프로그램을 쉽고 깔끔하게 설치할 수 있도록 만듭니다.

### 3.1 원클릭 설치 파일 (Installer) 제작
- **도구:** Inno Setup (Windows) 또는 NSIS
- **기능:**
  - Python 임베딩 (사용자가 파이썬을 따로 설치할 필요 없게 내장) -> **매우 중요**
  - 필수 라이브러리(`ffmpeg` 등) 자동 설치
  - 바탕화면 바로가기 생성

### 3.2 배포 파이프라인 구축
- 개발자가 코드를 수정하고 서버에 업로드하면, 사용자는 런처를 켰을 때 자동으로 패치를 받아가도록 연결합니다.

---

## 🚀 사용자 시나리오 (UX 흐름)

1.  **웹사이트 접속:** 사용자는 `mytubestudio.com` 같은 소개 사이트에서 회원가입 및 결제.
2.  **다운로드:** "Windows용 다운로드" 버튼을 눌러 설치 파일(`Setup.exe`) 다운.
3.  **설치 및 실행:** 설치 후 바탕화면 아이콘 실행.
4.  **로그인:** 런처가 뜨면 웹사이트 아이디로 로그인.
5.  **검사:**
    - "유료 회원님 환영합니다." (인증 성공)
    - "최신 버전 확인 중... 업데이트가 있습니다." (자동 패치 진행)
6.  **시작:** 모든 검사가 끝나면 우리가 만든 **영상 생성기가 실행됨**.
7.  **작업:** 영상 생성, 파일 저장은 모두 **사용자 컴퓨터**에서 처리됨.

---

## 📝 우선순위 및 추천 접근법

가장 먼저 해야 할 일은 **"로그인 런처"**와 **"간단한 인증 서버"**를 만드는 것입니다.
현재 프로그램 코드를 뜯어고칠 필요 없이, 프로그램 **가장 앞단에 '대문'을 하나 다는 작업**이라고 보시면 됩니다.

이 방향으로 진행하시겠다면, "간단한 로그인 서버 및 런처 프로토타입"부터 설계를 도와드릴 수 있습니다.
