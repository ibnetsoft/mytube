
import os

target_file = r"c:\Users\kimse\Downloads\유튜브소재발굴기\롱폼생성기\templates\pages\subtitle_gen.html"

# Additional Replacements for leftovers
replacements = {
    # Basic Words
    "?먮쭑": "자막",
    "??": "영상",
    "?대?吏€": "이미지",
    "?뼹截?": "현재",
    "?쒖옉": "시작",
    "醫낅즺": "종료",
    "?앹꽦": "생성",
    "?꾨즺": "완료",
    "?€??": "저장",
    "?뮶": "저장",
    "吏꾪뻾": "진행",
    "?뺣낫": "정보",
    "?덈떎": "니다",
    "媛€": "이",
    "瑜?": "를",
    "?€": "에",
    "?ν븯怨?": "장하고",
    "留욎땅": "맞춥",
    "議곗젙": "조정",
    "?쒓컙": "시간",
    "怨?": "과",
    "寃뱀튌": "겹칠",
    "?뱀떆": "섹시", # Maybe '섹션'? Context check needed. Actually '표시' (Display)?
    "?쒖떆": "표시",
    "?⑸땲??": "합니다",
    "媛€": "가",
    "遺꾩꽍": "분석",
    "?ㅻ뵒??": "오디오",
    "?놁쓬": "없음",
    "諛?": "및",
    "紐⑤뱺": "모든",
    "?ㅼ떆": "다시",
    "?섎룞": "수동",
    "?몄쭛": "편집",
    "?щ씪吏묐땲??": "사라집니다",
    "濡쒕뱶": "로드",
    "?ㅽ뙣": "실패",
    "?щ텇??": "재분석",
    "?붿껌": "요청",
    "?ㅻ쪟": "오류",
    "?좏깮": "선택",
    "由ъ뒪??": "리스트",
    "?륅툘": "현재", # 'Current Selected' context
    "?좏깮??": "선택된",
    "?띿뒪??": "텍스트",
    
    # Phrases / Sentences
    "자막을 선택하면 미리보기媛€ ?쒖떆?⑸땲??": "자막을 선택하면 미리보기가 표시됩니다.",
    "由ъ뒪?몄뿉???먮쭑???좏깮?섏꽭??": "리스트에서 자막을 선택하세요.",
    "議곗젙???쒓컙???€?ν븯怨??대?吏€ ?깊겕瑜?留욎땅?덈떎": "조정된 시간을 저장하고 이미지 싱크를 맞춥니다.",
    "?대?吏€瑜??댁쟾 ?먮쭑遺€???쒖옉 (?꾨줈 ?뺤옣)": "이미지를 이전 자막부터 시작 (앞으로 확장)",
    "?대?吏€瑜??ㅼ쓬 ?먮쭑遺€???쒖옉 (?꾨옒濡?異뺤냼)": "이미지를 다음 자막부터 시작 (아래로 축소)",
    "留덉?留??대?吏€??醫낅즺 ?쒓컙?€ ?ㅻ뵒??湲몄씠濡?怨좎젙?⑸땲??": "마지막 이미지의 종료 시간은 오디오 길이로 고정됩니다.",
    "?쒖옉 ?쒓컙蹂대떎 ?욎꽕 ???놁뒿?덈떎.": "시작 시간보다 앞설 수 없습니다.",
    "?ㅼ쓬 ?대?吏€ ?쒖옉怨?寃뱀튌 ???놁뒿?덈떎.": "다음 이미지 시작과 겹칠 수 없습니다.",
    
    # Buttons & UI
    "?륅툘 ?좏깮???먮쭑 ?몄쭛": "현재 선택된 자막 편집",
    "?뼹截??대?吏€: -": "현재 이미지: -",
    "?뼹截??대?吏€ ?쒖옉": "현재 이미지 시작",
    "?뼹截??대?吏€ 醫낅즺": "현재 이미지 종료",
    "?뼹截??대?吏€": "현재 이미지",
    "?쨼 AI ?먮쭑 ?앹꽦 (?먮룞)": "✨ AI 자막 생성 (자동)",
    
    # Leftovers from previous
    "寃€?€怨좊뵓": "검은고딕",
    "湲€?먯깋": "글자색",
    "쿠키런/option>": "쿠키런</option>",
    "화면비/span>": "화면비</span>",
    'title="화이트>': 'title="화이트">',
    'title="옐로우>': 'title="옐로우">',
    "?렄截?": "화면비",
    "?뼹截??대?吏€ ?깊겕 留욎텛湲?": "AI 이미지 싱크 맞추기",
    "?뮶 ?€??": "저장",
    "?렗 ?뚮뜑留?": "영상 렌더링",
    "?뱶 ?먮쭑 由ъ뒪??": "자막 리스트",
    "?럺截?": "전체",
    "AI ?ъ떛??": "AI 재생성",
    "?먮쭑???좏깮?섎㈃": "자막을 선택하면",
    "媛€ ?쒖떆?⑸땲??": "가 표시됩니다.",
    "?먮쭑 미리보기": "자막 미리보기",
    "異붽?": "추가",
    "諛곗튂": "배치",
    "諛곖깮": "발생",
}

with open(target_file, "r", encoding="utf-8") as f:
    content = f.read()

count = 0
for bad, good in replacements.items():
    if bad in content:
        content = content.replace(bad, good)
        count += 1

if count > 0:
    print(f"Fixed {count} remaining patterns.")
    with open(target_file, "w", encoding="utf-8") as f:
        f.write(content)
else:
    print("No remaining patterns found.")
